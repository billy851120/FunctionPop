<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%- title %>
    </title>
    <link rel="stylesheet" href="/css/all.css">
    <link rel="stylesheet" href="/js/member/member.css">
<link rel="stylesheet" href="/js/member/bootstrap-4.6.1-dist/css/bootstrap.css">
    <script src="/js/member/bootstrap-4.6.1-dist/js/jquery.min.js"></script>
    <!-- <script src="/bootstrap-4.6.1-dist/js/popper.min.js"></script> -->
    <!-- <script src="../node_modules/bootstrap/dist/js/bootstrap.js" ></script> -->
    <script src="/js/member/bootstrap-4.6.1-dist/js/bootstrap.min.js"></script>
    <!-- <script src="/js/member/LeftNavBar.js"></script> -->
    <style>
    .bb{
        border:1px solid red;
    }   
    .product_info img {
        width: 100%;
    }
    @media screen and (max-width: 767px){
       .product_aa {font-size: 10px;} 
       .product_name{font-size: 13px;}
    }
    /* .pIconbtn {
            border-radius: 5px;
            width: 80px;
            height: 45px;
            background: white;
            color: black;
            border: 0px ;
            width: 60px; 
            height: 45px;
        } */
     .product_desc{
        font-size: 8px;
        overflow :hidden;
         display: -webkit-box;
        -webkit-line-clamp: 4; 
        -webkit-box-orient: vertical;
        }

    </style>
</head>

<body>

    <!-- content -->
    <%- include("../navbar.ejs") %>

        <div class="container">

            <%- include("../template/loginbar") %>
          
                <!-- 左邊選單列 -->
                <div class="row mt-4">
                    <div class="col-12 col-lg-2 text-center mb-4 ">
                        <p class="mb-3 col-4 col-lg-12 d-lg-block d-inline"><a href="/home/member/memberData"
                                class="nav-link text-dark memberData d-inline d-lg-block">個人資料</a></p>
                        <p class="mb-3 col-4 col-lg-12 d-lg-block d-inline"><a href="/home/member/orderList"
                                class="nav-link text-dark   d-inline d-lg-block">訂單&退貨</a></p>
                        <p class="mb-3 col-4 col-lg-12 d-lg-block d-inline"><a href="/home/member/myFavourite"
                                class="nav-link text-dark font-weight-bold orderList myFavourite d-inline d-lg-block">我的最愛</a>
                        </p>
                    </div>

                    <!-- 右邊內容：我的最愛 -->
                    <% if(memberprofile) { %>
                        <div class="col-12 col-lg-10 row-box p-3">
                            <div class="row">
                                <div class="col-12 p-2 text-center title_1">
                                    <p>我的最愛</p>
                                </div>
                            </div>
                            <div class="row p-2 mb-3">
                                <div class="col-4 text-center border-right border-secondary"><a href="">全部加入購物車</a>
                                </div>
                                <div  id="clearFavor" class="col-4 text-center border-right border-secondary">
                                    <form method="POST" action="/home/member/myFavourite" id="clearAll" name="clearAll">
                                        <input type="hidden" name="clearallcontent" value="0912383555">
                                        <input type="hidden" name="memcontent" value="<%- memberprofile.id %>">
                                        <button type="submit" class="btn">清空全部商品</button>
                                    </form>
                                </div>
                                <div class="col-4 text-center text-secondary "><span class="mr-1"><%- todos.length %></span>件商品</div>
                            </div>



                            <% for (var i=0; i<todos.length; i++) { %>
                            <div class="row  align-items-lg-center text-center border p-2 mx-1 ">
                                <div class="col-4 col-lg-3  text-center align-items-lg-center product_info ">
                                    <a href="/home/product/<%- todos[i].product_gender %>/single_product/<%- todos[i].product_id %>"><img class=""
                                    src="/img/product/<%= todos[i].product_image %>" title="<%- todos[i].product_description %>"></a>
                                    
                                    
                                </div>

                                <div class="col-6 col-lg-2 text-left align-items-lg-start product_aa">
                                     <p class="font-weight-bold product_name" ><%- todos[i].product_name %> </p>
       <!-- < lg disappear -->       <p class="d-lg-block d-none text-secondary  "><%- todos[i].product_description  %> </p>
       <!-- < lg display -->         <p class="d-lg-none"><%- todos[i].product_gender %></p>
       <!-- < lg display -->         <p class="d-lg-none text-secondary product_desc"><%- todos[i].product_description  %> </p>
                                </div>

      <!-- < lg disappear -->      <div class="col-lg-1 d-lg-block d-none "><%- todos[i].product_gender %></div>

      <!-- < lg disappear -->      <div class="col-lg-2 d-lg-block d-none " style="color:red">$<%- todos[i].product_price %></div>

         
      <!-- < lg display -->        <div class="d-flex col-2 d-lg-none d-block mt-2 align-items-end flex-column bd-highlight">
                                         <button class="btn text-right"> 
                                                <svg xmlns="http://www.w3.org/2000/svg"  class="bd-highlight"
                                                 width="24" height="24" fill="currentColor" class="bi bi-trash3-fill"
                                                 viewBox="0 0 16 16">
                                                 <path
                                                     d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z" />
                                                </svg>
                                             
                                         </button>
                                            <p class="d-lg-none mt-auto" style="color:red ;">$<%- todos[i].product_price %></p> 
                                    </div>
                                <a href="#" class="mt-2 col-12 col-lg-2 btn_GO ">移至購物車</a>
                        
                                
                                <% var memid =0; %>
                                <% if(memberprofile != null){ %>
                                    <% memid = memberprofile.id;}else{memid = 0;} %>
     <!-- < xl disappear -->  <% var memid =0; %>
     <% if(memberprofile != null){ %>
        <% memid = memberprofile.id;}else{memid = 0;} %>
    <button type="submit" id="inputSend<%-i%>" onclick=" formSubmit(this)"  class="col-xl-2 d-lg-block d-none text-dark btn">
        <input type="hidden" name="inputText<%-i%>" id="inputText<%-i%>" value="<%- todos[i].product_id%>">
        <input type="hidden" name="inputText<%-i%>" id="inputText<%-i%>" value="<%- memid%>">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"
            fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
            <path
                d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z" />
        </svg>
    </button>
                                    
                            </div>  <!-- row -->
                            
                            <%}%>

                            

                        </div> <!-- col-10 -->
                        <% } else { %>
                            <div class="alert alert-warning col-12 col-lg-10 text-center align-self-center"
                                role="alert">請先登入</div>

                            <% } %>
                </div> <!-- row -->
                <p class="text-center mt-5 font-weight-bold">新潮指標</p>
                <hr>
                <div id="carouselExampleControls" class="carousel slide " data-ride="carousel">
                    <ol class="carousel-indicators mb-n4 ">
                        <li data-target="#carouselExampleControls" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleControls" data-slide-to="1"></li>
                        <li data-target="#carouselExampleControls" data-slide-to="2"></li>
                    </ol>
                    <!-- <div class="carousel-indicators bg-danger mb-0 p-2">
                <button type="button" data-target="#carouselExampleControls" data-slide-to="0" class="" aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-target="#carouselExampleControls" data-slide-to="1" aria-label="Slide 2"></button>
                <button type="button" data-target="#carouselExampleControls" data-slide-to="2" aria-label="Slide 3"></button>
            </div> -->
                    <div class="carousel-inner">
                        <div class="carousel-item active text-center  ">
                            <img class="mr-4" src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=1">
                            <img class="mr-4" src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=2">
                            <img class="mr-4" src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=3">
                            <img class="mr-4 d-none d-lg-inline"
                                src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=4">
                            <img class="mr-4 d-none d-lg-inline"
                                src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=5">
                        </div>
                        <div class="carousel-item text-center">
                            <img class="mr-4" src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=6">
                            <img class="mr-4" src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=7">
                            <img class="mr-4" src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=8">
                            <img class="mr-4 d-none d-lg-inline"
                                src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=9">
                            <img class="mr-4 d-none d-lg-inline"
                                src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=10">
                        </div>
                        <div class="carousel-item text-center">
                            <img class="mr-4" src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=11">
                            <img class="mr-4" src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=12">
                            <img class="mr-4" src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=13">
                            <img class="mr-4 d-none d-lg-inline"
                                src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=14">
                            <img class="mr-4 d-none d-lg-inline"
                                src="https://dummyimage.com/100x150/f7f7f7/7cfa5c.jpg&text=15">
                        </div>
                        <div class="align-items-center text-center ">
                            <button class="carousel-control-prev " type="button" data-target="#carouselExampleControls"
                                data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only bg-warning">Previous</span>
                            </button>
                        </div>
                        <button class="carousel-control-next" type="button" data-target="#carouselExampleControls"
                            data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </button>
                    </div>

                </div>

        </div> <!-- container -->

        <%- include("../footer.ejs") %>

</body>


<script>
    function formSubmit(obj) {
        console.log();
        var pid = obj.children[0].value;
        var cid = obj.children[1].value;
        // var send = obj.id;
        var send = document.querySelector(`#${obj.id}`);
        console.log(send);
        // const value = content.value;
        var xhr = new XMLHttpRequest();
        xhr.open('post', '/home/member/myFavourite'); // 搭配 app.js 中的 post 路由
      
      // json 格式
      xhr.setRequestHeader('Content-type', 'application/json');
      var data = JSON.stringify(
        {
            pid: pid,
            cid: cid,
        //   list: [1, 2, 3],
        },
      );
      xhr.send(data);
      xhr.onload = function() {
        console.log(JSON.parse(xhr.responseText));
      }
      $(obj).parent().remove();
    };

    function clearAll(){
      document.getElementById('clearFavor').submit();
    }
</script>
</html>