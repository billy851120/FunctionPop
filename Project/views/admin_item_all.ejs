<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <link rel="stylesheet" href="/css/all.css">
    <script src="/js/admin/bootstrap.min.js"></script>
    <script src="/js/admin/jquery.min.js"></script>
    <link rel="icon" href="/img/admin/black_icon.png" type="image/gif" sizes="16x16">
    <title>f.pop 後台管理</title>
    <style>
        .fp-item>li>span {
            padding: 15px;
        }

        .modal-inp {
            height: 35px;
            width: 200px;
            border: 1px solid #acacac;
            border-radius: 6px;
            font-size: 10px;
            margin: 5px 0;
            padding: 0 10px;
        }
    </style>
</head>

<body id="page-top">
    <%- include("admin_navbar.ejs") %>
        <!-- Main Content -->
        <div class="fpop-main p-5">

            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/admin/goods">首頁</a></li>
                    <li class="breadcrumb-item"><a href="#">商品管理</a></li>
                    <li class="breadcrumb-item active" aria-current="page">所有商品</li>
                </ol>
            </nav>
            <!-- --------------------- -->
    
            <!-- --------------------- -->
            <button type="button" class=" my-btn-color my-left-radius btn btn-dark" data-bs-toggle="modal"
                data-bs-target="#exampleModal">
                新增商品
            </button>
            <div class="modal " id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true"
                data-bs-backdrop="static">
                <div class="modal-dialog modal-dialog-scrollable">
                    <div class="modal-content" style="width: 500px;">
                        <div class="modal-header">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal"
                                aria-label="Close">x</button>
                        </div>
                        <div class="modal-body">
                            <div class="inputbox">
                                <label>產品名稱*:</label>
                                <input class="modal-inp" type="text" id="product_name" placeholder="產品名稱*"> <br>
                                <label>敘述*:</label>
                                <input class="modal-inp" type="text" id="product_description" placeholder="敘述*"> <br>
                                <label>價格*：</label>
                                <input class="modal-inp" type="text" id="product_price" placeholder="價格*"> <br>
                                <label>類別*:</label>
                                <select class="modal-inp" id="product_category">
                                    <option value="上衣">上衣</option>
                                    <option value="下著">下著</option>
                                    <option value="鞋">鞋</option>
                                    <option value="包">包</option>
                                    <option value="洋裝">洋裝</option>
                                    <option value="裙子">裙子</option>
                                    <option value="帽子">帽子</option>
                                </select><br>
                                <button class="btn btn-dark" id="register">新增商品</button>
                            </div>
                        </div>
                        <div class="modal-footer  my-color1">
                            <div style="float:right;">
                                <button id="add" class="btn btn-light my-right-radius my-left-radius"
                                    onclick="saveField()"><strong>儲存</strong> </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="input-group mb-3" style="width: 200px;">
                <div>
                    <button class="btn btn-outline-secondary" type="button">搜尋類別</button>
                </div>
                <select class="custom-select light-table-filter " aria-label="Example select with button addon"
                    data-table="order-table">
                    <option></option>
                    <option>上衣</option>
                    <option>下著</option>
                    <option>鞋</option>
                    <option>包</option>
                    <option>洋裝</option>
                </select>
            </div>
            <div class="col-lg mt-5">
                <div class="card h-100">
                    <div class="card-header">所有產品</div>
                    <div class="card-body d-flex align-items-center">
                        <table class="table table-hover order-table">
                            <thead>
                                <th class="col-1" style="vertical-align:text-top;">編號</th>
                                <th class="col-1" style="vertical-align:text-top;">產品名稱</th>
                                <th class="col-2" style="vertical-align:text-top;">圖片</th>
                                <th class="col-1" style="vertical-align:text-top;">類別</th>
                                <th class="col-2" style="vertical-align:text-top;">敘述</th>
                                <th class="col-1" style="vertical-align:text-top;">價格</th>
                                <th class="col-2" style="vertical-align:text-top;">上架日期</th>
                            </thead>
                            <tbody>
                                <% data.forEach((item ,index)=> { %>
                                    <tr>
                                        <td>
                                            <%= item.product_code %>
                                        </td>
                                        <td>
                                            <%= item.product_name%>
                                        </td>
                                        <td>
                                            <img style="height: 50px;" src="/img/product/<%= item.product_image %>"
                                                alt="">
                                            <img style="height: 50px;" src="/img/product/<%= item.product_image2 %>"
                                                alt="">
                                            <img style="height: 50px;" src="/img/product/<%= item.product_image3 %>"
                                                alt="">
                                            <img style="height: 50px;" src="/img/product/<%= item.product_image4 %>"
                                                alt="">
                                        </td>
                                        <td>
                                            <%= item.product_category %>
                                        </td>

                                        <td>
                                            <%= item.product_description %>
                                        </td>
                                        <td>
                                            <%= item.product_price %> $
                                        </td>
                                        <td>

                                            <%= moment(item.product_upload).format(shortDataFormat) %>
                                        </td>

                                    </tr>
                                    <% }) %>
                            </tbody>
                        </table>
                        <!-- <canvas class="chart-item"></canvas> -->
                    </div>

                    <div class=" text-center">

                        <a href="/admin/goods/item_all/<%= i %>"></a>
                        <% for(var i=1; i <=last_page; i++) { %>
                            <a href="/admin/goods/item_all/<%= i %>">
                                <%= i %>
                            </a>
                            <% } %>

                                <p>會員資料共 <%= total_nums %> 筆，共 <%= curr_page %> / <%= last_page%> 頁</p>
                    </div>
                </div>
            </div>

            <script>
                (function (document) {
                    'use strict';

                    // 建立 LightTableFilter
                    var LightTableFilter = (function (Arr) {

                        var _input;

                        // 資料輸入事件處理函數
                        function _onInputEvent(e) {
                            _input = e.target;
                            var tables = document.getElementsByClassName(_input.getAttribute('data-table'));
                            Arr.forEach.call(tables, function (table) {
                                Arr.forEach.call(table.tBodies, function (tbody) {
                                    Arr.forEach.call(tbody.rows, _filter);
                                });
                            });
                        }

                        // 資料篩選函數，顯示包含關鍵字的列，其餘隱藏
                        function _filter(row) {
                            var text = row.textContent.toLowerCase(), val = _input.value.toLowerCase();
                            row.style.display = text.indexOf(val) === -1 ? 'none' : 'table-row';
                        }

                        return {
                            // 初始化函數
                            init: function () {
                                var inputs = document.getElementsByClassName('light-table-filter');
                                Arr.forEach.call(inputs, function (input) {
                                    input.oninput = _onInputEvent;
                                });
                            }
                        };
                    })(Array.prototype);

                    // 網頁載入完成後，啟動 LightTableFilter
                    document.addEventListener('readystatechange', function () {
                        if (document.readyState === 'complete') {
                            LightTableFilter.init();
                        }
                    });

                })(document);
            </script>
        </div>
        <!-- Main Content end-->

        <!-- Right page end -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>



</body>

</html>